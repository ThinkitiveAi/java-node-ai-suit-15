<div class="provider-registration">
  <div class="registration-header">
    <h1>Provider Registration</h1>
    <p>Join our network of healthcare providers and start making a difference in patients' lives.</p>
  </div>

  <div class="registration-container">
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">
      
      <!-- Success/Error Messages -->
      <div *ngIf="successMessage" class="alert alert-success">
        {{ successMessage }}
      </div>
      
      <div *ngIf="errorMessage" class="alert alert-error">
        {{ errorMessage }}
      </div>

      <!-- Personal Information Section -->
      <div class="form-section">
        <h2>Personal Information</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="first_name" class="form-label">First Name *</label>
            <input 
              type="text" 
              id="first_name" 
              formControlName="first_name" 
              class="form-control"
              [class.invalid]="isFieldInvalid('first_name')"
            >
            <div *ngIf="isFieldInvalid('first_name')" class="error-message">
              {{ getFieldError('first_name') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="last_name" class="form-label">Last Name *</label>
            <input 
              type="text" 
              id="last_name" 
              formControlName="last_name" 
              class="form-control"
              [class.invalid]="isFieldInvalid('last_name')"
            >
            <div *ngIf="isFieldInvalid('last_name')" class="error-message">
              {{ getFieldError('last_name') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email" class="form-label">Email Address *</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-control"
              [class.invalid]="isFieldInvalid('email')"
            >
            <div *ngIf="isFieldInvalid('email')" class="error-message">
              {{ getFieldError('email') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="phone_number" class="form-label">Phone Number *</label>
            <input 
              type="tel" 
              id="phone_number" 
              formControlName="phone_number" 
              class="form-control"
              [class.invalid]="isFieldInvalid('phone_number')"
            >
            <div *ngIf="isFieldInvalid('phone_number')" class="error-message">
              {{ getFieldError('phone_number') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="date_of_birth" class="form-label">Date of Birth *</label>
            <input 
              type="date" 
              id="date_of_birth" 
              formControlName="date_of_birth" 
              class="form-control"
              [class.invalid]="isFieldInvalid('date_of_birth')"
            >
            <div *ngIf="isFieldInvalid('date_of_birth')" class="error-message">
              {{ getFieldError('date_of_birth') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="gender" class="form-label">Gender *</label>
            <select 
              id="gender" 
              formControlName="gender" 
              class="form-control"
              [class.invalid]="isFieldInvalid('gender')"
            >
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
              <option value="prefer_not_to_say">Prefer not to say</option>
            </select>
            <div *ngIf="isFieldInvalid('gender')" class="error-message">
              {{ getFieldError('gender') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="password" class="form-label">Password *</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              class="form-control"
              [class.invalid]="isFieldInvalid('password')"
            >
            <div *ngIf="isFieldInvalid('password')" class="error-message">
              {{ getFieldError('password') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="confirm_password" class="form-label">Confirm Password *</label>
            <input 
              type="password" 
              id="confirm_password" 
              formControlName="confirm_password" 
              class="form-control"
              [class.invalid]="isFieldInvalid('confirm_password')"
            >
            <div *ngIf="isFieldInvalid('confirm_password')" class="error-message">
              {{ getFieldError('confirm_password') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Professional Information Section -->
      <div class="form-section">
        <h2>Professional Information</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="license_number" class="form-label">License Number *</label>
            <input 
              type="text" 
              id="license_number" 
              formControlName="license_number" 
              class="form-control"
              [class.invalid]="isFieldInvalid('license_number')"
            >
            <div *ngIf="isFieldInvalid('license_number')" class="error-message">
              {{ getFieldError('license_number') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="specialization" class="form-label">Specialization *</label>
            <select 
              id="specialization" 
              formControlName="specialization" 
              class="form-control"
              [class.invalid]="isFieldInvalid('specialization')"
            >
              <option value="">Select Specialization</option>
              <option *ngFor="let spec of specializations" [value]="spec.id">
                {{ spec.name }}
              </option>
            </select>
            <div *ngIf="isFieldInvalid('specialization')" class="error-message">
              {{ getFieldError('specialization') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="years_of_experience" class="form-label">Years of Experience *</label>
          <input 
            type="number" 
            id="years_of_experience" 
            formControlName="years_of_experience" 
            class="form-control"
            [class.invalid]="isFieldInvalid('years_of_experience')"
            min="0" 
            max="50"
          >
          <div *ngIf="isFieldInvalid('years_of_experience')" class="error-message">
            {{ getFieldError('years_of_experience') }}
          </div>
        </div>
      </div>

      <!-- Education Section -->
      <div class="form-section">
        <h2>Education</h2>
        <div formArrayName="education">
          <div *ngFor="let education of educationArray.controls; let i = index" [formGroupName]="i" class="education-item">
            <div class="form-row">
              <div class="form-group">
                <label [for]="'degree_' + i" class="form-label">Degree *</label>
                <input 
                  type="text" 
                  [id]="'degree_' + i" 
                  formControlName="degree" 
                  class="form-control"
                >
              </div>
              
              <div class="form-group">
                <label [for]="'institution_' + i" class="form-label">Institution *</label>
                <input 
                  type="text" 
                  [id]="'institution_' + i" 
                  formControlName="institution" 
                  class="form-control"
                >
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label [for]="'graduation_year_' + i" class="form-label">Graduation Year *</label>
                <input 
                  type="number" 
                  [id]="'graduation_year_' + i" 
                  formControlName="graduation_year" 
                  class="form-control"
                  min="1950" 
                  [max]="getCurrentYear()"
                >
              </div>
              
              <div class="form-group">
                <label [for]="'field_of_study_' + i" class="form-label">Field of Study *</label>
                <input 
                  type="text" 
                  [id]="'field_of_study_' + i" 
                  formControlName="field_of_study" 
                  class="form-control"
                >
              </div>
            </div>
            
            <button type="button" class="btn btn-secondary" (click)="removeEducation(i)">
              Remove Education
            </button>
          </div>
        </div>
        
        <button type="button" class="btn btn-primary" (click)="addEducation()">
          Add Education
        </button>
      </div>

      <!-- Address Section -->
      <div class="form-section">
        <h2>Address</h2>
        <div class="form-group">
          <label for="street" class="form-label">Street Address *</label>
          <input 
            type="text" 
            id="street" 
            formControlName="street" 
            class="form-control"
            [class.invalid]="isFieldInvalid('street')"
          >
          <div *ngIf="isFieldInvalid('street')" class="error-message">
            {{ getFieldError('street') }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="city" class="form-label">City *</label>
            <input 
              type="text" 
              id="city" 
              formControlName="city" 
              class="form-control"
              [class.invalid]="isFieldInvalid('city')"
            >
            <div *ngIf="isFieldInvalid('city')" class="error-message">
              {{ getFieldError('city') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="state" class="form-label">State *</label>
            <select 
              id="state" 
              formControlName="state" 
              class="form-control"
              [class.invalid]="isFieldInvalid('state')"
            >
              <option value="">Select State</option>
              <option *ngFor="let state of states" [value]="state.code">
                {{ state.name }}
              </option>
            </select>
            <div *ngIf="isFieldInvalid('state')" class="error-message">
              {{ getFieldError('state') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="zip" class="form-label">ZIP Code *</label>
            <input 
              type="text" 
              id="zip" 
              formControlName="zip" 
              class="form-control"
              [class.invalid]="isFieldInvalid('zip')"
            >
            <div *ngIf="isFieldInvalid('zip')" class="error-message">
              {{ getFieldError('zip') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Languages Section -->
      <div class="form-section">
        <h2>Languages Spoken</h2>
        <div formArrayName="languages_spoken">
          <div *ngFor="let language of languagesSpokenArray.controls; let i = index" class="language-item">
            <div class="form-row">
              <div class="form-group">
                <label [for]="'language_' + i" class="form-label">Language *</label>
                <input 
                  type="text" 
                  [id]="'language_' + i" 
                  [formControlName]="i" 
                  class="form-control"
                >
              </div>
              
              <button type="button" class="btn btn-secondary" (click)="removeLanguage(i)">
                Remove
              </button>
            </div>
          </div>
        </div>
        
        <button type="button" class="btn btn-primary" (click)="addLanguage()">
          Add Language
        </button>
      </div>

      <!-- Submit Button -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="isLoading || registrationForm.invalid"
        >
          <span *ngIf="isLoading">Registering...</span>
          <span *ngIf="!isLoading">Register Provider</span>
        </button>
      </div>
    </form>
  </div>
</div> 